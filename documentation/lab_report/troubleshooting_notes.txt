

```txt
Troubleshooting Notes – Week 3

1) 500 at Site Root
   - Cause: URLConf or template miswire.
   - Fix: Included maps.urls in project urls.py and ensured hello_map view & template existed.

2) Admin static 404s (e.g., /static/admin/css/*.css)
   - Cause: Whitenoise/STATICFILES storage vs DEBUG settings.
   - Fix: Use `DEBUG=True` for dev; ensure `STATIC_URL=/static/` and run `collectstatic` in production setups.
   - Verified with `python manage.py findstatic admin/css/base.css`.

3) CSRF error for API POSTs
   - Cause: SessionAuthentication in DRF + no CSRF token when posting from Swagger/curl.
   - Fix: For lab testing, allowed unauthenticated POST on selected endpoints via DRF settings or decorator:
     - `DEFAULT_AUTHENTICATION_CLASSES` excludes SessionAuthentication for API-only testing, or
     - per-view `@authentication_classes([])` with `@permission_classes([AllowAny])`.

4) Tests failing to create test DB or PostGIS
   - Cause: DB user lacked privileges / PostGIS not on template1.
   - Fixes:
     - Grant createdb on role or run tests with a superuser role.
     - `\c template1` then `CREATE EXTENSION IF NOT EXISTS postgis;`
     - If “test_webmapping_db already exists”, allow deletion when prompted.

5) NameError: CityManager not defined
   - Cause: Model referenced custom manager not imported/defined before use.
   - Fix: Move/define CityManager above model class or remove if unused.

6) GeoJSON test expected FeatureCollection
   - Cause: Default DRF serializer output not wrapped as FeatureCollection.
   - Fix: Use `rest_framework_gis`'s `GeoFeatureModelSerializer` or wrap view response:
     - `{ "type": "FeatureCollection", "features": serializer.data }`.

7) Git submodule / nested repo mistake
   - Cause: Added project folder containing `.git`.
   - Fix: `git rm --cached <folder>` then re-add contents (without `.git`) or copy files to a new clean folder.

General Tips
- Use `python3 manage.py runserver` when multiple Python versions are installed.
- For spatial queries: ensure `Point(longitude, latitude, srid=4326)` (lon, lat order).
- Keep `.env` or secrets out of version control.
